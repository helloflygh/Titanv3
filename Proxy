<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Base64 Iframe Generator</title>
    <style>
        body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; padding-top: 50px; background: #f4f4f9; }
        .container { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        input { width: 300px; padding: 10px; border: 1px solid #ccc; border-radius: 4px; }
        button { padding: 10px 20px; cursor: pointer; background: #007bff; color: white; border: none; border-radius: 4px; }
        button:hover { background: #0056b3; }
    </style>
</head>
<body>

<div class="container">
    <h2>T!tan Proxy</h2>
    <input type="text" id="userInput" placeholder="Search T!tan Proxy or type a URL">
    <button onclick="launchIframe()">Search</button>
</div>

<script>
    function launchIframe() {
        const input = document.getElementById('userInput').value;
        const domain = "https://allthelove.bfcontrol.com.mx/render.html?url="; 
        
        const encoded = btoa(input);
        const fullUrl = domain + encoded;

        const newWin = window.open('about:blank', '_blank');

        if (newWin) {
            newWin.document.write(`
                <!DOCTYPE html>
                <html>
                <head>
                    <title>Classes</title>
                    <style>
                        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; background: #000; }
                        
                        /* --- Panic Button on Main Page --- */
                        #top-bar {
                            width: 100%;
                            display: flex;
                            justify-content: center;
                            position: absolute;
                            top: 20px;
                            left: 0;
                            z-index: 9999;
                            pointer-events: none;
                        }

                        .panic-btn {
                            pointer-events: auto;
                            font-size: 18px;
                            padding: 10px 40px;
                            color: #000;
                            background: #ff3333;
                            font-family: 'Arial Black', sans-serif;
                            cursor: pointer;
                            border-radius: 8px;
                            font-weight: 900;
                            border: 3px solid #000;
                            box-shadow: 0 4px 10px rgba(0,0,0,0.5);
                            text-transform: uppercase;
                            transition: transform 0.1s;
                        }

                        /* --- The Proxy Iframe --- */
                        #main-game-iframe { width: 100%; height: 100%; border: none; }

                        /* --- Panic Overlay (The Fake Screen) --- */
                        #panic-overlay { 
                            display: none; 
                            position: fixed; 
                            top: 0; left: 0; 
                            width: 100vw; height: 100vh; 
                            background: #fff; 
                            z-index: 1000000; 
                        }
                        #panic-iframe { width: 100%; height: 100%; border: none; }

                        /* --- The Close 'X' Button --- */
                        .close-panic { 
                            position: absolute; 
                            top: 15px; 
                            right: 20px; 
                            cursor: pointer; 
                            font-size: 24px;
                            font-family: Arial, sans-serif;
                            color: #ccc; /* Subtle grey color */
                            font-weight: bold;
                            z-index: 1000001;
                            user-select: none;
                        }
                        .close-panic:hover { color: #999; }
                    </style>
                </head>
                <body>
                    <div id="top-bar">
                        <button class="panic-btn" onclick="doPanic()">PANIC</button>
                    </div>

                    <iframe id="main-game-iframe" src="${fullUrl}"></iframe>

                    <div id="panic-overlay">
                        <span class="close-panic" onclick="closePanic()">Ã—</span>
                        <iframe id="panic-iframe"></iframe>
                    </div>

                    <script>
                        const PANIC_URL = "https://clever.com"; 

                        function doPanic() {
                            document.getElementById("panic-iframe").src = PANIC_URL;
                            document.getElementById("panic-overlay").style.display = "block";
                        }

                        function closePanic() {
                            document.getElementById("panic-overlay").style.display = "none";
                            document.getElementById("panic-iframe").src = "";
                        }

                        window.addEventListener('keydown', (e) => {
                            if (e.ctrlKey && e.key.toLowerCase() === 'x') {
                                doPanic();
                            }
                        });
                    <\/script>
                </body>
                </html>
            `);
            newWin.document.close();
        } else {
            alert("Pop-up blocked!");
        }
    }
</script>

</body>
</html>
