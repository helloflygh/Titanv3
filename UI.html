<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T!tan</title>
    <style>
        :root {
            --glass-bg: rgba(255, 255, 255, 0.45); 
            --glass-blur: blur(12px);
            --font-main: 'Courier New', Courier, monospace;
            --accent-color: #4CAF50; 
        }

        * { color: #000000 !important; box-sizing: border-box; }

        body {
            font-family: var(--font-main);
            margin: 0; padding: 0;
            background-image: url('https://raw.githubusercontent.com/helloflygh/games/main/spacetitan.gif');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            text-align: center;
            min-height: 100vh;
            display: flex; flex-direction: column; align-items: center;
            overflow-x: hidden;
            overflow-y: auto; 
        }

        /* --- Draggable Panic Container --- */
        #panic-container {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 25000;
        }

        .drag-handle {
            cursor: grab;
            background: rgba(255, 255, 255, 0.7);
            padding: 8px 10px;
            border-radius: 8px;
            font-size: 18px;
            user-select: none;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            border: 1px solid rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
        }
        .drag-handle:active { cursor: grabbing; }

        .panic-btn {
            font-size: 16px; cursor: pointer;
            background: #ff4b4b; padding: 10px 25px; border-radius: 8px;
            font-weight: bold; border: none; box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            transition: transform 0.2s;
        }
        .panic-btn:hover { transform: scale(1.05); }

        /* --- Sidebar & UI Layout --- */
        .side-panel {
            height: 100%; width: 0;
            position: fixed; z-index: 200;
            top: 0; left: 0;
            background-color: var(--glass-bg);
            backdrop-filter: var(--glass-blur);
            overflow-x: hidden;
            transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
            padding-top: 20px;
            border-right: 1px solid rgba(0, 0, 0, 0.1);
        }

        .sidebar-logo {
            width: 80%; max-width: 180px; margin: 60px auto 30px auto; 
            display: block; cursor: pointer;
            transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .menu-item {
            padding: 15px 25px; font-size: 18px; display: flex; align-items: center;   
            transition: transform 0.2s, background 0.2s; 
            border-bottom: 1px solid rgba(0, 0, 0, 0.05); cursor: pointer;
        }

        .hamburger {
            position: fixed; top: 20px; left: 20px;
            font-size: 30px; cursor: pointer; z-index: 100;
            background: rgba(255,255,255,0.6); padding: 5px 15px; border-radius: 8px;
        }

        .page-content { display: none; width: 100%; flex-direction: column; align-items: center; padding: 20px; }
        .active-page { display: flex; }

        .full-width-container {
            position: relative; width: 95vw; max-width: 1300px; margin: 40px auto; padding: 30px;
            background: var(--glass-bg); backdrop-filter: var(--glass-blur); border-radius: 20px;
        }

        #search { 
            width: 100%; max-width: 500px; padding: 15px; margin-bottom: 30px;
            border-radius: 30px; border: none; outline: none; background: rgba(255,255,255,0.8);
        }

        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 25px; width: 100%; }
        .item { background: #fff; border-radius: 14px; overflow: hidden; transition: transform 0.3s; cursor: pointer;}
        .item:hover { transform: scale(1.08); z-index: 10; box-shadow: 0 10px 20px rgba(0,0,0,0.2); }
        .item img { width: 100%; height: 160px; object-fit: cover; }
        .title { padding: 12px; font-weight: bold; }

        #panic-overlay { display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: #fff; z-index: 30000; }
    </style>
</head>
<body onload="initSite()">

    <div id="hamBtn" class="hamburger" onclick="handleNav(true)">&#9776;</div>
    
    <div id="panic-container">
        <div id="dragHandle" class="drag-handle">⠿</div>
        <button id="mainPanic" class="panic-btn" onclick="doPanic()">PANIC</button>
    </div>

    <div id="navPanel" class="side-panel">
        <span style="position: absolute; font-size: 30px; cursor: pointer; top:10px; right:15px;" onclick="handleNav(false)">&times;</span>
        <img src="https://raw.githubusercontent.com/helloflygh/Titanv3/main/T!tan-sidebar-logo.png" class="sidebar-logo" onclick="changeContent('homePage')">
        <div id="mainLinks">
            <div class="menu-item" onclick="changeContent('gamesPage')">Games</div>
            <div class="menu-item" onclick="changeContent('soundboardPage')">Soundboards</div>
            <div class="menu-item" onclick="changeContent('proxiesPage')">Proxies</div>
            <div class="menu-item" onclick="changeContent('blooketPage')">Blooket Hacks</div>
            <div class="menu-item" onclick="toggleSettings(true)">Settings</div>
        </div>
        <div id="settingsMenu" style="display:none; padding: 20px;">
            <div class="menu-item" onclick="toggleSettings(false)" style="font-weight:bold;">← Back</div>
            <label>Panic URL:</label>
            <input type="text" id="panicUrlInput" onchange="saveSettings()" placeholder="https://clever.com" style="width:100%; margin:10px 0; padding:8px;">
        </div>
    </div>

    <div id="homePage" class="page-content active-page">
        <div style="background:var(--glass-bg); padding:30px; border-radius:15px; margin-top: 120px; max-width: 600px;">
            <h1 style="margin-top:0;">T!tan v3.1.2</h1>
            <p>Welcome back! Use the <b>⠿ handle</b> to drag the Panic button anywhere on your screen. Your position will be saved automatically.</p>
        </div>
    </div>

    <div id="gamesPage" class="page-content">
        <div class="full-width-container">
            <input type="text" placeholder="Search Games..." id="search" onkeyup="filterImages()">
            <div class="grid">
                <div class="item" data-title="1v1 LOL" onclick="launchGame('https://raw.githubusercontent.com/CoolDude2349/Offline-Single-File-Games/master/offline/1v1.lol.html', '1v1 LOL')">
                    <img src="https://raw.githubusercontent.com/helloflygh/games/main/1v1lol.jpeg"><div class="title">1v1 LOL</div>
                </div>
                <div class="item" data-title="Minecraft" onclick="launchGame('https://raw.githubusercontent.com/helloflygh/Titanv3/main/minecraft.html', 'Minecraft')">
                    <img src="https://raw.githubusercontent.com/helloflygh/games/main/download%20(44).jpeg"><div class="title">Minecraft</div>
                </div>
                <div class="item" data-title="Slope" onclick="launchGame('https://raw.githubusercontent.com/helloflygh/Titanv3/main/slope.html', 'Slope')">
                    <img src="https://raw.githubusercontent.com/helloflygh/games/main/slope.jpeg"><div class="title">Slope</div>
                </div>
                <div class="item" data-title="Retro Bowl" onclick="launchGame('https://raw.githubusercontent.com/helloflygh/Titanv3/main/retrobowl.html', 'Retro Bowl')">
                    <img src="https://raw.githubusercontent.com/helloflygh/games/main/retrobowl.jpeg"><div class="title">Retro Bowl</div>
                </div>
                <div class="item" data-title="Bitlife" onclick="launchGame('https://raw.githubusercontent.com/helloflygh/Titanv3/main/bitlife.html', 'Bitlife')">
                    <img src="https://raw.githubusercontent.com/helloflygh/games/main/bitlife.jpeg"><div class="title">Bitlife</div>
                </div>
                <div class="item" data-title="Run 3" onclick="launchGame('https://raw.githubusercontent.com/helloflygh/Titanv3/main/run3.html', 'Run 3')">
                    <img src="https://raw.githubusercontent.com/helloflygh/games/main/run3.png"><div class="title">Run 3</div>
                </div>
                <div class="item" data-title="Tunnel Rush" onclick="launchGame('https://raw.githubusercontent.com/helloflygh/Titanv3/main/tunnelrush.html', 'Tunnel Rush')">
                    <img src="https://raw.githubusercontent.com/helloflygh/games/main/tunnelrush.jpeg"><div class="title">Tunnel Rush</div>
                </div>
                <div class="item" data-title="Subway Surfers" onclick="launchGame('https://raw.githubusercontent.com/helloflygh/Titanv3/main/subwaysurfers.html', 'Subway Surfers')">
                    <img src="https://raw.githubusercontent.com/helloflygh/games/main/subwaysurfers.jpeg"><div class="title">Subway Surfers</div>
                </div>
                <div class="item" data-title="Cookie Clicker" onclick="launchGame('https://raw.githubusercontent.com/helloflygh/Titanv3/main/cookieclicker.html', 'Cookie Clicker')">
                    <img src="https://raw.githubusercontent.com/helloflygh/games/main/cookieclicker.jpeg"><div class="title">Cookie Clicker</div>
                </div>
                <div class="item" data-title="Basket Stars" onclick="launchGame('https://raw.githubusercontent.com/helloflygh/Titanv3/main/basketstars.html', 'Basket Stars')">
                    <img src="https://raw.githubusercontent.com/helloflygh/games/main/basketstars.jpeg"><div class="title">Basket Stars</div>
                </div>
                <div class="item" data-title="Paper.io 2" onclick="launchGame('https://raw.githubusercontent.com/helloflygh/Titanv3/main/paperio2.html', 'Paper.io 2')">
                    <img src="https://raw.githubusercontent.com/helloflygh/games/main/paperio.png"><div class="title">Paper.io 2</div>
                </div>
                <div class="item" data-title="Smash Karts" onclick="launchGame('https://raw.githubusercontent.com/helloflygh/Titanv3/main/smashkarts.html', 'Smash Karts')">
                    <img src="https://raw.githubusercontent.com/helloflygh/games/main/smashkarts.jpeg"><div class="title">Smash Karts</div>
                </div>
                <div class="item" data-title="Eaglercraft" onclick="launchGame('https://raw.githubusercontent.com/helloflygh/Titanv3/main/eaglercraft.html', 'Eaglercraft')">
                    <img src="https://raw.githubusercontent.com/helloflygh/games/main/eagler.jpeg"><div class="title">Eaglercraft</div>
                </div>
                <div class="item" data-title="Drive Mad" onclick="launchGame('https://raw.githubusercontent.com/helloflygh/Titanv3/main/drivemad.html', 'Drive Mad')">
                    <img src="https://raw.githubusercontent.com/helloflygh/games/main/drivemad.jpeg"><div class="title">Drive Mad</div>
                </div>
            </div>
        </div>
    </div>

    <div id="proxiesPage" class="page-content">
        <div class="full-width-container">
            <h1>Dynamic Proxy</h1>
            <input type="text" id="proxyInput" placeholder="Enter URL (e.g. google.com)" style="padding:15px; width:300px; border-radius:20px; border:none; background:white;">
            <br><br>
            <button class="panic-btn" onclick="launchProxy()">Launch Proxy</button>
        </div>
    </div>

    <div id="panic-overlay"><span style="position:absolute; top:15px; left:15px; font-size:35px; cursor:pointer; font-weight:bold;" onclick="closePanic()">&times;</span><iframe id="panic-iframe" style="width:100%;height:100%;border:none;"></iframe></div>

    <script>
        // Shared Draggable Logic
        function makeDraggable(el, handle, storageKey) {
            let isDragging = false, offsetX, offsetY;
            const savedPos = JSON.parse(localStorage.getItem(storageKey));
            if (savedPos) { el.style.left = savedPos.x + 'px'; el.style.top = savedPos.y + 'px'; el.style.transform = 'none'; }
            handle.addEventListener("mousedown", (e) => {
                isDragging = true;
                const rect = el.getBoundingClientRect();
                offsetX = e.clientX - rect.left; offsetY = e.clientY - rect.top;
                handle.style.cursor = "grabbing";
            });
            document.addEventListener("mousemove", (e) => {
                if (!isDragging) return;
                el.style.left = (e.clientX - offsetX) + "px"; el.style.top = (e.clientY - offsetY) + "px"; el.style.transform = "none";
            });
            document.addEventListener("mouseup", () => {
                if (isDragging) {
                    isDragging = false; handle.style.cursor = "grab";
                    localStorage.setItem(storageKey, JSON.stringify({ x: el.offsetLeft, y: el.offsetTop }));
                }
            });
        }

        function initSite() {
            document.getElementById("panicUrlInput").value = localStorage.getItem('panicLink') || 'https://clever.com';
            makeDraggable(document.getElementById("panic-container"), document.getElementById("dragHandle"), "panicPosition");
        }

        function handleNav(isOpen) { document.getElementById("navPanel").style.width = isOpen ? "250px" : "0"; }
        function changeContent(id) { 
            document.querySelectorAll('.page-content').forEach(p => p.classList.remove('active-page')); 
            document.getElementById(id).classList.add('active-page'); 
            handleNav(false); 
        }

        function toggleSettings(show) {
            document.getElementById("mainLinks").style.display = show ? "none" : "block";
            document.getElementById("settingsMenu").style.display = show ? "block" : "none";
        }

        function saveSettings() { localStorage.setItem('panicLink', document.getElementById("panicUrlInput").value); }
        function doPanic() {
            let url = document.getElementById("panicUrlInput").value.trim() || 'https://clever.com';
            document.getElementById("panic-iframe").src = url.startsWith('http') ? url : 'https://' + url;
            document.getElementById("panic-overlay").style.display = "block";
        }
        function closePanic() { document.getElementById("panic-overlay").style.display = "none"; document.getElementById("panic-iframe").src = ""; }

        function filterImages() {
            let filter = document.getElementById('search').value.toLowerCase();
            document.querySelectorAll('.item').forEach(item => {
                item.style.display = item.getAttribute('data-title').toLowerCase().includes(filter) ? "" : "none";
            });
        }

        function launchGame(url, title) {
            const panicVal = document.getElementById("panicUrlInput").value || 'https://clever.com';
            const newWin = window.open('about:blank', '_blank');
            if (newWin) {
                newWin.document.write(`
                    <html>
                    <head>
                        <title>Clever | Portal</title>
                        <style>
                            body, html { margin:0; padding:0; height:100%; overflow:hidden; background:#000; font-family:sans-serif; }
                            #panic-container { position:fixed; top:20px; left:50%; transform:translateX(-50%); display:flex; align-items:center; gap:8px; z-index:999; }
                            .drag-handle { cursor:grab; background:rgba(255,255,255,0.8); padding:8px 10px; border-radius:8px; font-size:18px; border:1px solid #ccc; }
                            .panic-btn { background:#ff4b4b; padding:10px 25px; border-radius:8px; font-weight:bold; border:none; cursor:pointer; font-size:16px; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }
                            iframe { width:100%; height:100%; border:none; }
                            #panic-overlay { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:#fff; z-index:1000; }
                        </style>
                    </head>
                    <body>
                        <div id="panic-container"><div id="dragHandle" class="drag-handle">⠿</div><button class="panic-btn" onclick="doPanic()">PANIC</button></div>
                        <iframe src="${url}"></iframe>
                        <div id="panic-overlay"><iframe id="p-frame" style="width:100%;height:100%;border:none;"></iframe></div>
                        <script>
                            function doPanic() { document.getElementById("p-frame").src="${panicVal}"; document.getElementById("panic-overlay").style.display="block"; }
                            ${makeDraggable.toString()}
                            makeDraggable(document.getElementById("panic-container"), document.getElementById("dragHandle"), "panicPosition");
                        <\/script>
                    </body></html>`);
                newWin.document.close();
            }
        }

        function launchProxy() {
            const input = document.getElementById('proxyInput').value;
            if(!input) return;
            const fullUrl = "https://realworld.helpforukraine.at/render.html?url=" + btoa(input);
            launchGame(fullUrl, "Proxy");
        }
    </script>
</body>
</html>
