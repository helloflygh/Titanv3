<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>HTML Loader Screen</title>

<style>
    html, body {
        margin: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
    }

    #viewer {
        width: 100%;
        height: 100%;
        border: none;
        background: white;
    }

    /* --- Large Red Panic Button --- */
    .panic-btn {
        position: fixed; 
        top: 20px; 
        left: 50%; 
        transform: translateX(-50%);
        font-size: 24px; 
        padding: 18px 50px; 
        color: #000000 !important; 
        background: #ff3333; /* Pure Red */
        
        font-family: 'Arial Black', sans-serif;
        cursor: pointer; 
        z-index: 99999;
        border-radius: 12px;
        font-weight: 900; 
        border: 4px solid #000; /* Thick black border */
        box-shadow: 0 6px 20px rgba(0,0,0,0.5);
        transition: all 0.2s ease-in-out;
        text-transform: uppercase;
        letter-spacing: 3px;
    }

    .panic-btn:hover { 
        transform: translateX(-50%) scale(1.08); 
        background: #ff4d4d;
    }

    .panic-btn:active {
        transform: translateX(-50%) scale(0.92);
        box-shadow: 0 2px 10px rgba(0,0,0,0.5);
    }

    /* --- Panic Overlay --- */
    #panic-overlay { 
        display: none; 
        position: fixed; 
        top: 0; left: 0; 
        width: 100vw; height: 100vh; 
        background: #fff; 
        z-index: 100000; 
    }
    #panic-iframe { width: 100%; height: 100%; border: none; }
    
    .close-panic {
        position: absolute; top: 15px; left: 15px; 
        font-size: 35px; cursor: pointer; color: #000 !important;
        font-weight: bold;
        z-index: 100001;
    }
</style>
</head>

<body>

<button class="panic-btn" onclick="doPanic()">PANIC</button>

<iframe id="viewer"></iframe>

<div id="panic-overlay">
    <span class="close-panic" onclick="closePanic()">&times;</span>
    <iframe id="panic-iframe"></iframe>
</div>

<script>
const githubHTMLUrl = "https://raw.githubusercontent.com/CoolDude2349/Offline-Single-File-Games/master/offline/geometrydash.html";
const PANIC_URL = "https://clever.com"; 

async function loadGame() {
    try {
        const response = await fetch(githubHTMLUrl);
        let html = await response.text();

        const baseUrl = githubHTMLUrl.substring(0, githubHTMLUrl.lastIndexOf("/") + 1);
        html = html.replace(
            "<head>",
            `<head><base href="${baseUrl}">`
        );

        const iframe = document.getElementById("viewer");
        const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;

        iframeDoc.open();
        iframeDoc.write(html);
        iframeDoc.close();

        iframe.onload = function() {
            try {
                iframe.contentWindow.addEventListener('keydown', (e) => {
                    if (e.ctrlKey && e.key.toLowerCase() === 'x') {
                        e.preventDefault();
                        parent.doPanic();
                    }
                });
            } catch (e) { console.log("Hotkey injection limited."); }
        };

    } catch (err) {
        alert("Failed to load GitHub HTML");
        console.error(err);
    }
}

function doPanic() {
    document.getElementById("panic-iframe").src = PANIC_URL;
    document.getElementById("panic-overlay").style.display = "block";
}

function closePanic() {
    document.getElementById("panic-overlay").style.display = "none";
    document.getElementById("panic-iframe").src = "";
}

window.addEventListener('keydown', (e) => {
    if (e.ctrlKey && e.key.toLowerCase() === 'x') {
        e.preventDefault(); 
        doPanic();
    }
});

window.addEventListener("DOMContentLoaded", loadGame);
</script>

</body>
</html>
