<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Google Drive</title>
</head>
<body style="background: #ffffff;">
    <script>
        (async function autoLaunch() {
            const codeURL = "https://raw.githubusercontent.com/helloflygh/Titanv3/main/UI.html";
            const iconURL = "https://raw.githubusercontent.com/helloflygh/games/main/clever-favicon.png";
            const tabName = "Clever | Portal";
            const redirectURL = "https://classroom.google.com";

            try {
                // 1. Fetch the raw GitHub code and favicon simultaneously
                const [htmlRes, iconRes] = await Promise.all([
                    fetch(codeURL),
                    fetch(iconURL)
                ]);

                const html = await htmlRes.text();
                const iconBlob = await iconRes.blob();
                const localIconURL = URL.createObjectURL(iconBlob);

                // 2. Open the about:blank tab
                const win = window.open("about:blank", "_blank");
                
                if (win) {
                    // 3. Inject the code into the new tab
                    const head = `
                        <title>${tabName}</title>
                        <link rel="icon" type="image/x-icon" href="${localIconURL}">
                    `;
                    win.document.open();
                    win.document.write(head + html);
                    win.document.close();

                    // 4. Redirect the original tab to Google Classroom
                    window.location.href = redirectURL;
                } else {
                    // Fallback if pop-ups are blocked
                    alert("Please allow pop-ups for this site to function.");
                }

            } catch (err) {
                console.error("Auto-launch failed:", err);
            }
        })();
    </script>
</body>
</html>
